<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TextAnalyzer â€” A verdade estÃ¡ nas entrelinhas</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Instrument+Sans:wght@400;500;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #C9A84C;
    --gold-light: #E2C17A;
    --cream: #F0EBE1;
    --dark: #080808;
    --dark-2: #0F0F0F;
    --dark-3: #161616;
    --muted: rgba(240,235,225,0.4);
    --muted-2: rgba(240,235,225,0.2);
    --red: #C0392B;
    --green: #27AE60;
    --purple: #8E44AD;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body {
    background: var(--dark);
    color: var(--cream);
    font-family: 'Instrument Sans', sans-serif;
    overflow-x: hidden;
  }

  /* GRAIN */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.035;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  }

  /* ---- HERO ---- */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 80px 24px 60px;
    position: relative;
    overflow: hidden;
  }

  .hero-glow {
    position: absolute;
    border-radius: 50%;
    filter: blur(140px);
    pointer-events: none;
  }

  .hero-eyebrow {
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 28px;
    opacity: 0;
    animation: rise 0.8s ease 0.2s forwards;
  }

  .hero-title {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: clamp(52px, 11vw, 120px);
    font-weight: 300;
    line-height: 0.95;
    letter-spacing: -0.02em;
    color: var(--cream);
    opacity: 0;
    animation: rise 0.9s ease 0.35s forwards;
  }

  .hero-title em {
    font-style: italic;
    color: var(--gold-light);
  }

  .hero-subtitle {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(18px, 3vw, 26px);
    font-weight: 300;
    color: var(--muted);
    margin-top: 24px;
    max-width: 520px;
    line-height: 1.5;
    opacity: 0;
    animation: rise 0.9s ease 0.5s forwards;
  }

  .hero-cta {
    margin-top: 48px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
    opacity: 0;
    animation: rise 0.9s ease 0.65s forwards;
  }

  .btn-hero {
    background: var(--gold);
    color: var(--dark);
    border: none;
    cursor: pointer;
    font-family: 'Instrument Sans', sans-serif;
    font-weight: 600;
    font-size: 15px;
    padding: 16px 48px;
    letter-spacing: 0.04em;
    text-decoration: none;
    display: inline-block;
    transition: all 0.25s;
    position: relative;
    overflow: hidden;
  }
  .btn-hero::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0.15);
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  .btn-hero:hover { background: var(--gold-light); transform: translateY(-2px); box-shadow: 0 12px 40px rgba(201,168,76,0.25); }
  .btn-hero:hover::after { transform: translateX(0); }

  .hero-cta-note {
    font-size: 12px;
    color: var(--muted-2);
    letter-spacing: 0.05em;
  }

  .scroll-hint {
    position: absolute;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    opacity: 0;
    animation: rise 1s ease 1.2s forwards;
  }
  .scroll-hint span { font-size: 10px; letter-spacing: 0.2em; color: var(--muted-2); text-transform: uppercase; }
  .scroll-line { width: 1px; height: 40px; background: linear-gradient(to bottom, var(--gold), transparent); animation: scrollpulse 2s ease-in-out infinite; }
  @keyframes scrollpulse { 0%,100% { opacity: 0.3; } 50% { opacity: 1; } }

  /* ---- STATS TICKER ---- */
  .ticker-bar {
    background: var(--dark-3);
    border-top: 1px solid rgba(255,255,255,0.05);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    padding: 14px 0;
    overflow: hidden;
    white-space: nowrap;
  }
  .ticker-inner {
    display: inline-flex;
    gap: 0;
    animation: ticker 30s linear infinite;
  }
  .ticker-item {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 0 48px;
    font-size: 12px;
    letter-spacing: 0.1em;
    color: var(--muted);
  }
  .ticker-item strong { color: var(--gold); font-weight: 600; }
  .ticker-dot { width: 4px; height: 4px; background: var(--gold); border-radius: 50%; opacity: 0.4; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

  /* ---- SECTIONS ---- */
  section { padding: 100px 24px; }
  .container { max-width: 1100px; margin: 0 auto; }
  .container-narrow { max-width: 700px; margin: 0 auto; }

  .section-label {
    font-size: 10px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 20px;
  }

  /* ---- HOW IT WORKS ---- */
  .how-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    margin-top: 60px;
  }

  .how-item {
    background: var(--dark-2);
    padding: 40px 32px;
    position: relative;
    overflow: hidden;
    transition: background 0.3s;
  }
  .how-item:hover { background: var(--dark-3); }
  .how-item::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(to right, transparent, var(--gold), transparent);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .how-item:hover::before { opacity: 1; }

  .how-number {
    font-family: 'Cormorant Garamond', serif;
    font-size: 64px;
    font-weight: 300;
    color: rgba(201,168,76,0.1);
    line-height: 1;
    margin-bottom: 20px;
    transition: color 0.3s;
  }
  .how-item:hover .how-number { color: rgba(201,168,76,0.2); }

  .how-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px;
    font-weight: 400;
    color: var(--cream);
    margin-bottom: 12px;
  }

  .how-desc {
    font-size: 13px;
    line-height: 1.7;
    color: var(--muted);
  }

  /* ---- WHAT YOU GET ---- */
  .get-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;
    margin-top: 60px;
  }

  .get-item {
    background: var(--dark);
    padding: 36px;
    display: flex;
    gap: 20px;
    align-items: flex-start;
    transition: background 0.3s;
  }
  .get-item:hover { background: #0d0d0d; }

  .get-icon { font-size: 20px; flex-shrink: 0; margin-top: 2px; }

  .get-item-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 20px;
    font-weight: 400;
    color: var(--cream);
    margin-bottom: 8px;
  }

  .get-item-desc { font-size: 13px; color: var(--muted); line-height: 1.7; }

  /* ---- PREVIEW ---- */
  .preview-section { overflow: hidden; }

  .preview-wrap {
    margin-top: 60px;
    position: relative;
  }

  .preview-card {
    background: var(--dark-2);
    border: 1px solid rgba(255,255,255,0.07);
    padding: 36px;
    max-width: 520px;
    margin: 0 auto;
    position: relative;
  }

  .preview-quote {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px;
    font-style: italic;
    font-weight: 300;
    line-height: 1.4;
    color: var(--cream);
    border-left: 2px solid var(--gold);
    padding-left: 20px;
    margin-bottom: 28px;
  }

  .preview-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
    gap: 16px;
  }

  .preview-score-big {
    font-family: 'Cormorant Garamond', serif;
    font-size: 52px;
    font-weight: 300;
    line-height: 1;
  }

  .preview-label {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted-2);
    margin-bottom: 4px;
  }

  .preview-value { font-size: 14px; color: var(--cream); }
  .preview-sub { font-size: 12px; color: var(--muted); margin-top: 3px; }

  .signal {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
  }
  .signal:last-child { border-bottom: none; }
  .signal-icon { font-size: 13px; flex-shrink: 0; margin-top: 1px; }
  .signal-text { font-size: 13px; color: var(--muted); line-height: 1.5; }

  .preview-badge {
    position: absolute;
    top: -12px;
    right: 24px;
    background: var(--gold);
    color: var(--dark);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.15em;
    padding: 4px 12px;
    text-transform: uppercase;
  }

  .float-card {
    position: absolute;
    background: var(--dark-3);
    border: 1px solid rgba(255,255,255,0.08);
    padding: 16px 20px;
    max-width: 200px;
    animation: float 6s ease-in-out infinite;
  }
  .float-card-text { font-size: 12px; color: var(--muted); line-height: 1.5; }
  .float-card-label { font-size: 10px; color: var(--gold); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 6px; }

  @keyframes float {
    0%,100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
  }

  /* ---- TESTIMONIALS ---- */
  .testimonials-section { background: var(--dark-2); }

  .testi-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    margin-top: 60px;
  }

  .testi-item { background: var(--dark); padding: 32px; }
  .testi-stars { color: var(--gold); font-size: 13px; letter-spacing: 2px; margin-bottom: 16px; }

  .testi-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 18px;
    font-weight: 300;
    font-style: italic;
    line-height: 1.5;
    color: var(--cream);
    margin-bottom: 20px;
  }

  .testi-author { font-size: 12px; color: var(--muted); letter-spacing: 0.05em; }
  .testi-handle { color: var(--gold); }

  /* ---- CTA / APP SECTION ---- */
  #app {
    padding: 0;
    position: relative;
    overflow: hidden;
  }

  /* ---- APP REVEAL WRAPPER ---- */
  .app-reveal {
    background: #0a0a0a;
    min-height: 100vh;
    position: relative;
  }

  /* ---- FOOTER ---- */
  footer {
    border-top: 1px solid rgba(255,255,255,0.06);
    padding: 32px 24px;
    text-align: center;
  }

  .footer-logo {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px;
    font-weight: 300;
    color: var(--cream);
    margin-bottom: 12px;
  }
  .footer-logo em { font-style: italic; color: var(--gold); }
  .footer-note { font-size: 12px; color: var(--muted-2); line-height: 1.7; }

  /* ---- REVEAL TITLE ---- */
  .reveal-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(32px, 5vw, 56px);
    font-weight: 300;
    line-height: 1.15;
    letter-spacing: -0.01em;
    color: var(--cream);
    margin-bottom: 20px;
  }
  .reveal-title em { font-style: italic; color: var(--gold-light); }

  /* ---- ANIMATIONS ---- */
  @keyframes rise {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .fade-up.visible { opacity: 1; transform: translateY(0); }

  .counter { display: inline-block; }

  /* ---- RESPONSIVE ---- */
  @media (max-width: 768px) {
    .how-grid { grid-template-columns: 1fr; }
    .get-grid { grid-template-columns: 1fr; }
    .testi-grid { grid-template-columns: 1fr; }
    .preview-card { padding: 24px; }
    .float-card { display: none; }
    section { padding: 70px 24px; }
  }

  /* â•â•â• APP STYLES (DM Sans / DM Serif Display) â•â•â• */
  #react-app {
    min-height: 100vh;
    background: #0a0a0a;
    color: #e8e4dc;
    font-family: 'DM Serif Display', Georgia, serif;
    position: relative;
    overflow: hidden;
  }
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
  <div class="hero-glow" style="width:600px;height:600px;top:-200px;left:-200px;background:rgba(201,168,76,0.05);"></div>
  <div class="hero-glow" style="width:500px;height:500px;bottom:-150px;right:-150px;background:rgba(142,68,173,0.04);"></div>
  <div class="hero-glow" style="width:300px;height:300px;top:30%;left:50%;transform:translateX(-50%);background:rgba(201,168,76,0.03);"></div>

  <div class="hero-eyebrow">â—ˆ AnÃ¡lise psicolÃ³gica de conversas</div>

  <h1 class="hero-title">Text<em>Analyzer</em></h1>

  <p class="hero-subtitle">
    Cole qualquer conversa ou envie um print.<br>
    Descubra o que a pessoa realmente sente.
  </p>

  <div class="hero-cta">
    <a href="#app" class="btn-hero">Analisar minha conversa â†’</a>
    <span class="hero-cta-note">GrÃ¡tis Â· Resultado em segundos Â· Conversa nÃ£o armazenada</span>
  </div>

  <div class="scroll-hint">
    <div class="scroll-line"></div>
    <span>scroll</span>
  </div>
</section>

<!-- TICKER -->
<div class="ticker-bar">
  <div class="ticker-inner">
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>47.832</strong> conversas analisadas</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Score de interesse</strong> 0 a 100%</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>DinÃ¢mica de poder</strong> revelada</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Sinais ocultos</strong> identificados</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Mensagem ideal</strong> sugerida</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>WhatsApp Â· Instagram Â· Tinder</strong></span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>47.832</strong> conversas analisadas</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Score de interesse</strong> 0 a 100%</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>DinÃ¢mica de poder</strong> revelada</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Sinais ocultos</strong> identificados</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>Mensagem ideal</strong> sugerida</span>
    <span class="ticker-item"><span class="ticker-dot"></span> <strong>WhatsApp Â· Instagram Â· Tinder</strong></span>
  </div>
</div>

<!-- HOW IT WORKS -->
<section>
  <div class="container">
    <div class="fade-up">
      <div class="section-label">Como funciona</div>
      <h2 class="reveal-title">TrÃªs passos.<br><em>Uma verdade.</em></h2>
    </div>
    <div class="how-grid fade-up">
      <div class="how-item">
        <div class="how-number">01</div>
        <div class="how-title">Cole ou envie um print</div>
        <p class="how-desc">Cole o texto da conversa diretamente ou tire um print do WhatsApp, Tinder, Instagram â€” qualquer chat. A IA lÃª a imagem automaticamente.</p>
      </div>
      <div class="how-item">
        <div class="how-number">02</div>
        <div class="how-title">A IA analisa tudo</div>
        <p class="how-desc">Em segundos, nossa IA mapeia perfil psicolÃ³gico, dinÃ¢mica de poder, score de interesse e lÃª o que nÃ£o foi dito nas entrelinhas.</p>
      </div>
      <div class="how-item">
        <div class="how-number">03</div>
        <div class="how-title">Receba a verdade</div>
        <p class="how-desc">Resultado completo com o que fazer agora, a mensagem exata para enviar, e um card para compartilhar no TikTok se quiser.</p>
      </div>
    </div>
  </div>
</section>

<!-- PREVIEW DO RESULTADO -->
<section class="preview-section" style="background: var(--dark-2);">
  <div class="container">
    <div class="fade-up" style="text-align:center;margin-bottom:0;">
      <div class="section-label">Exemplo de anÃ¡lise</div>
      <h2 class="reveal-title" style="margin-bottom:0;">Isso Ã© o que vocÃª <em>vai receber</em></h2>
    </div>

    <div class="preview-wrap fade-up">
      <div class="preview-card">
        <div class="preview-badge">AnÃ¡lise real</div>

        <div class="preview-quote">
          "Ele estÃ¡ interessado mas com medo de se comprometer. VocÃª tem o poder â€” e nÃ£o sabe."
        </div>

        <div class="preview-row">
          <div>
            <div class="preview-label">Perfil</div>
            <div class="preview-value">Lucas</div>
            <div class="preview-sub" style="color: var(--gold); font-size:11px;">O Evitativo AtraÃ­do</div>
          </div>
          <div style="text-align:right;">
            <div class="preview-label">Interesse</div>
            <div class="preview-score-big" style="color:#E67E22;">73<span style="font-size:22px;">%</span></div>
          </div>
        </div>

        <div style="background:rgba(255,255,255,0.03);padding:10px 14px;margin-bottom:20px;font-size:12px;color:var(--muted);">
          AtraÃ§Ã£o com medo de intimidade &nbsp;Â·&nbsp; Poder: <span style="color:var(--cream);">vocÃª</span>
        </div>

        <div style="margin-bottom:20px;">
          <div class="preview-label" style="margin-bottom:10px;">Sinais identificados</div>
          <div class="signal">
            <span class="signal-icon" style="color:#27AE60;">âœ¦</span>
            <span class="signal-text">Ele inicia contato frequentemente mas nunca propÃµe encontro â€” sinal de interesse com bloqueio emocional.</span>
          </div>
          <div class="signal">
            <span class="signal-icon" style="color:#C0392B;">âœ—</span>
            <span class="signal-text">Respostas curtas apÃ³s mensagens emocionalmente abertas â€” padrÃ£o de evitaÃ§Ã£o quando a intimidade aumenta.</span>
          </div>
          <div class="signal">
            <span class="signal-icon" style="color:#8E44AD;">â—ˆ</span>
            <span class="signal-text">Nas entrelinhas: ele quer que vocÃª tome a iniciativa para nÃ£o se sentir vulnerÃ¡vel.</span>
          </div>
        </div>

        <div style="background:rgba(201,168,76,0.07);border:1px solid rgba(201,168,76,0.15);padding:16px;border-radius:1px;">
          <div class="preview-label" style="color:rgba(201,168,76,0.5);margin-bottom:8px;">O que fazer agora</div>
          <p style="font-size:14px;color:var(--cream);line-height:1.5;margin-bottom:10px;">Proponha um encontro direto e especÃ­fico â€” sem deixar espaÃ§o para ambiguidade.</p>
          <div style="background:rgba(0,0,0,0.3);padding:10px 14px;font-size:13px;color:rgba(240,235,225,0.7);font-style:italic;">
            "TÃ´ indo num lugar incrÃ­vel sÃ¡bado, vocÃª vem?"
          </div>
        </div>
      </div>

      <div class="float-card" style="top: 60px; right: -40px; animation-delay: 0s;">
        <div class="float-card-label">Poder</div>
        <div class="float-card-text">VocÃª tem mais controle nessa dinÃ¢mica do que percebe.</div>
      </div>
      <div class="float-card" style="bottom: 80px; left: -60px; animation-delay: 2s;">
        <div class="float-card-label">Red flag</div>
        <div class="float-card-text">PadrÃ£o de evitaÃ§Ã£o detectado em 3 momentos.</div>
      </div>
    </div>
  </div>
</section>

<!-- O QUE VOCÃŠ RECEBE -->
<section>
  <div class="container">
    <div class="fade-up">
      <div class="section-label">O que vocÃª recebe</div>
      <h2 class="reveal-title">AnÃ¡lise completa.<br><em>Sem rodeios.</em></h2>
    </div>
    <div class="get-grid fade-up">
      <div class="get-item">
        <div class="get-icon">ğŸ§ </div>
        <div>
          <div class="get-item-title">Perfil psicolÃ³gico</div>
          <p class="get-item-desc">ArquÃ©tipo da pessoa na conversa â€” O Evitativo, A Controladora, O Ansioso â€” com resumo do comportamento em 2 frases diretas.</p>
        </div>
      </div>
      <div class="get-item">
        <div class="get-icon">ğŸ“Š</div>
        <div>
          <div class="get-item-title">Score de interesse 0â€“100%</div>
          <p class="get-item-desc">Percentual calculado com base em padrÃµes linguÃ­sticos, tempo de resposta, iniciativa e engajamento emocional na conversa.</p>
        </div>
      </div>
      <div class="get-item">
        <div class="get-icon">âš–ï¸</div>
        <div>
          <div class="get-item-title">DinÃ¢mica de poder</div>
          <p class="get-item-desc">Quem tem mais poder na relaÃ§Ã£o e por quÃª â€” revelado com clareza para vocÃª saber sua posiÃ§Ã£o real.</p>
        </div>
      </div>
      <div class="get-item">
        <div class="get-icon">ğŸ”</div>
        <div>
          <div class="get-item-title">Sinais ocultos</div>
          <p class="get-item-desc">Green flags, red flags e o que foi dito nas entrelinhas â€” o que a pessoa nÃ£o disse mas claramente comunicou.</p>
        </div>
      </div>
      <div class="get-item">
        <div class="get-icon">ğŸ’¬</div>
        <div>
          <div class="get-item-title">Mensagem sugerida</div>
          <p class="get-item-desc">A mensagem exata para enviar agora, com explicaÃ§Ã£o do porquÃª funciona nessa situaÃ§Ã£o especÃ­fica.</p>
        </div>
      </div>
      <div class="get-item">
        <div class="get-icon">âœ¦</div>
        <div>
          <div class="get-item-title">Card para compartilhar</div>
          <p class="get-item-desc">Gere um card visual com o resultado para postar no TikTok, Instagram ou Stories. Formato pronto para viralizar.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- DEPOIMENTOS -->
<section class="testimonials-section">
  <div class="container">
    <div class="fade-up" style="text-align:center;">
      <div class="section-label">Depoimentos</div>
      <h2 class="reveal-title">O que estÃ£o <em>falando</em></h2>
    </div>
    <div class="testi-grid fade-up">
      <div class="testi-item">
        <div class="testi-stars">â˜…â˜…â˜…â˜…â˜…</div>
        <p class="testi-text">"Colei a conversa do meu ex e a IA disse exatamente o que eu sabia mas nÃ£o queria admitir. Chorei e ri ao mesmo tempo."</p>
        <div class="testi-author">Mariana S. Â· <span class="testi-handle">@mari.bh</span></div>
      </div>
      <div class="testi-item">
        <div class="testi-stars">â˜…â˜…â˜…â˜…â˜…</div>
        <p class="testi-text">"O score de interesse foi 18%. Eu achava que estava indo bem. Salvou minha dignidade antes que eu mandasse outra mensagem."</p>
        <div class="testi-author">Rafael T. Â· <span class="testi-handle">@rafa.sp</span></div>
      </div>
      <div class="testi-item">
        <div class="testi-stars">â˜…â˜…â˜…â˜…â˜…</div>
        <p class="testi-text">"Usei o print do WhatsApp, a IA leu tudo em segundos e identificou 3 red flags que eu tinha ignorado por semanas."</p>
        <div class="testi-author">Camila R. Â· <span class="testi-handle">@camilinha</span></div>
      </div>
    </div>
  </div>
</section>

<!-- APP SECTION -->
<section id="app" style="padding: 0; background: #0a0a0a;">
  <!-- Divisor visual landing â†’ app -->
  <div style="text-align:center; padding: 60px 24px 0; background: #0a0a0a; position:relative; overflow:hidden;">
    <div style="position:absolute;top:0;left:50%;transform:translateX(-50%);width:1px;height:60px;background:linear-gradient(to bottom,var(--dark-2),#C9A84C);"></div>
    <div style="display:inline-flex;align-items:center;gap:12px;margin-bottom:16px;">
      <div style="height:1px;width:60px;background:rgba(201,168,76,0.2);"></div>
      <span style="font-size:10px;letter-spacing:0.3em;color:#C9A84C;text-transform:uppercase;">Analisar agora</span>
      <div style="height:1px;width:60px;background:rgba(201,168,76,0.2);"></div>
    </div>
    <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(28px,5vw,48px);font-weight:300;color:#F0EBE1;line-height:1.1;margin-bottom:8px;">
      A conversa que vocÃª nÃ£o para de pensar<br><em style="font-style:italic;color:#E2C17A;">merece uma resposta.</em>
    </h2>
    <p style="font-size:13px;color:rgba(240,235,225,0.3);padding-bottom:40px;">Sua conversa nÃ£o Ã© armazenada Â· Resultado em segundos</p>
  </div>
  <!-- React app mount point -->
  <div id="react-app"></div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-logo">Text<em>Analyzer</em></div>
  <p class="footer-note">
    AnÃ¡lises geradas por IA. Use como reflexÃ£o â€” nÃ£o como verdade absoluta.<br>
    Sua conversa nÃ£o Ã© armazenada em nenhum servidor.
  </p>
</footer>

<!-- React + Babel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

// â”€â”€â”€ Prompts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SYSTEM_PROMPT = `VocÃª Ã© um psicÃ³logo especialista em comunicaÃ§Ã£o, linguagem nÃ£o-verbal textual e dinÃ¢micas de relacionamento. Analise a conversa fornecida com profundidade e retorne APENAS um JSON vÃ¡lido (sem markdown, sem backticks) com exatamente esta estrutura:
{"perfil":{"nome":"nome ou apelido identificado, ou 'Pessoa A'","arquetipo":"ex: O Evitativo, A Controladora, O Ansioso, etc.","resumo":"2 frases diretas sobre quem essa pessoa Ã© nessa conversa"},"dinamica":{"score_interesse":0,"score_poder":"'vocÃª', 'ela/ele' ou 'equilibrado'","tipo_vinculo":"ex: AtraÃ§Ã£o com medo de intimidade","resumo":"2 frases sobre a dinÃ¢mica"},"sinais":[{"tipo":"green","texto":"sinal positivo"},{"tipo":"red","texto":"sinal de alerta"},{"tipo":"hidden","texto":"algo nas entrelinhas"}],"proximo_passo":{"recomendacao":"o que fazer agora em 1 frase direta","mensagem_sugerida":"mensagem exata ou null","aviso":"o risco principal"},"frase_final":"frase impactante e honesta que resume tudo"}
Seja direto, honesto e um pouco brutal. NÃ£o suavize a realidade.`;

const EXTRACT_PROMPT = `Extraia o texto completo desta conversa de print de tela, mantendo o formato de quem disse o quÃª. Retorne APENAS o texto da conversa, sem explicaÃ§Ãµes. Se nÃ£o conseguir identificar, retorne "ERRO: imagem nÃ£o legÃ­vel".`;

const FREE_LIMIT = 10;

const scoreColor = s => s >= 70 ? "#00ff87" : s >= 40 ? "#ffd700" : "#ff4757";
const SC = {
  green:  { bg: "rgba(0,255,135,0.08)",   border: "#00ff87", icon: "âœ¦" },
  red:    { bg: "rgba(255,71,87,0.08)",   border: "#ff4757", icon: "âœ—" },
  hidden: { bg: "rgba(180,100,255,0.08)", border: "#b464ff", icon: "â—ˆ" },
};

const APP_CSS = `
*{box-sizing:border-box;}
.ta-grain{position:absolute;inset:0;pointer-events:none;z-index:0;opacity:.4;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");}
.ta-glow{position:absolute;border-radius:50%;filter:blur(120px);pointer-events:none;z-index:0;}

textarea,input[type=text],input[type=email],input[type=password]{
  width:100%;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);
  color:#e8e4dc;font-family:'DM Sans',sans-serif;font-size:14px;
  padding:12px 16px;border-radius:2px;outline:none;transition:border-color .3s;box-sizing:border-box;}
textarea{line-height:1.7;resize:vertical;}
textarea:focus,input:focus{border-color:rgba(255,200,100,.4);}
textarea::placeholder,input::placeholder{color:rgba(232,228,220,.25);}

.btn-gold{background:#e8c96d;color:#0a0a0a;border:none;cursor:pointer;
  font-family:'DM Sans',sans-serif;font-weight:500;font-size:15px;
  padding:14px 36px;border-radius:2px;letter-spacing:.02em;transition:all .2s;width:100%;}
.btn-gold:hover{background:#f0d880;transform:translateY(-1px);}
.btn-gold:disabled{opacity:.4;cursor:not-allowed;transform:none;}
.btn-dark{background:rgba(255,255,255,.05);color:#e8e4dc;border:1px solid rgba(255,255,255,.1);
  cursor:pointer;font-family:'DM Sans',sans-serif;font-size:14px;font-weight:500;
  padding:13px 20px;border-radius:2px;transition:all .2s;width:100%;}
.btn-dark:hover{background:rgba(255,255,255,.08);}
.btn-dark:disabled{opacity:.4;cursor:not-allowed;}
.btn-outline{background:transparent;color:rgba(232,228,220,.5);border:1px solid rgba(255,255,255,.1);
  cursor:pointer;font-family:'DM Sans',sans-serif;font-size:13px;
  padding:9px 20px;border-radius:2px;transition:all .2s;}
.btn-outline:hover{color:#e8e4dc;border-color:rgba(255,255,255,.25);}
.btn-share{background:rgba(232,201,109,.1);color:#e8c96d;border:1px solid rgba(232,201,109,.25);
  cursor:pointer;font-family:'DM Sans',sans-serif;font-size:14px;font-weight:500;
  padding:13px 20px;border-radius:2px;transition:all .2s;width:100%;}
.btn-share:hover{background:rgba(232,201,109,.18);}
.btn-pro{background:linear-gradient(135deg,#e8c96d,#c9a040);color:#0a0a0a;border:none;cursor:pointer;
  font-family:'DM Sans',sans-serif;font-weight:600;font-size:15px;
  padding:14px 36px;border-radius:2px;letter-spacing:.02em;transition:all .2s;width:100%;}
.btn-pro:hover{transform:translateY(-1px);box-shadow:0 8px 30px rgba(232,201,109,.25);}

.tab{flex:1;padding:10px;background:transparent;border:none;cursor:pointer;
  font-family:'DM Sans',sans-serif;font-size:13px;font-weight:500;
  color:rgba(232,228,220,.35);transition:all .2s;border-bottom:2px solid transparent;}
.tab.active{color:#e8c96d;border-bottom-color:#e8c96d;}
.tab:hover:not(.active){color:rgba(232,228,220,.6);}

.card{background:rgba(255,255,255,.025);border:1px solid rgba(255,255,255,.07);border-radius:2px;padding:24px;}

.drop-zone{border:2px dashed rgba(255,255,255,.1);border-radius:2px;padding:48px 20px;text-align:center;cursor:pointer;transition:all .2s;background:rgba(255,255,255,.02);}
.drop-zone:hover,.drop-zone.over{border-color:rgba(232,201,109,.4);background:rgba(232,201,109,.04);}

.score-bar{height:3px;background:rgba(255,255,255,.06);border-radius:2px;overflow:hidden;margin-top:8px;}
.score-fill{height:100%;border-radius:2px;transition:width 1.2s cubic-bezier(.4,0,.2,1);}
.ta-fade-in{animation:taFadeIn .55s ease forwards;}
@keyframes taFadeIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.pulse{animation:taPulse 2s ease-in-out infinite;}
@keyframes taPulse{0%,100%{opacity:.5}50%{opacity:1}}
.spin{animation:taSpin 1s linear infinite;display:inline-block;}
@keyframes taSpin{to{transform:rotate(360deg)}}
@keyframes taSlide{0%{left:-40%}100%{left:140%}}

.social-divider{display:flex;align-items:center;gap:12px;margin:4px 0;}
.social-divider::before,.social-divider::after{content:'';flex:1;height:1px;background:rgba(255,255,255,.07);}
.social-divider span{font-family:'DM Sans',sans-serif;font-size:11px;color:rgba(232,228,220,.3);white-space:nowrap;}

.btn-social{display:flex;align-items:center;justify-content:center;gap:10px;
  background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.09);
  color:#e8e4dc;cursor:pointer;font-family:'DM Sans',sans-serif;font-size:14px;
  padding:12px;border-radius:2px;width:100%;transition:all .2s;}
.btn-social:hover{background:rgba(255,255,255,.08);}

.paywall-overlay{position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:200;
  display:flex;align-items:center;justify-content:center;padding:24px;}
.paywall-box{background:#0f0f0f;border:1px solid rgba(255,255,255,.09);
  border-radius:4px;padding:40px 32px;max-width:420px;width:100%;text-align:center;}

.usage-pill{display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);
  border-radius:999px;padding:4px 12px;
  font-family:'DM Sans',sans-serif;font-size:12px;color:rgba(232,228,220,.45);}
.usage-dot{width:6px;height:6px;border-radius:50%;}
`;

// â”€â”€â”€ Share Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ShareCard({ resultado, onClose }) {
  const canvasRef = useRef();
  const [url, setUrl] = useState(null);

  useEffect(() => { setTimeout(draw, 80); }, []);

  function draw() {
    const c = canvasRef.current; if (!c) return;
    const ctx = c.getContext("2d");
    const W = 720, H = 1260; c.width = W; c.height = H;

    ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0, 0, W, H);
    const g1 = ctx.createRadialGradient(0, 0, 0, 0, 0, 500);
    g1.addColorStop(0, "rgba(232,201,109,.13)"); g1.addColorStop(1, "rgba(0,0,0,0)");
    ctx.fillStyle = g1; ctx.fillRect(0, 0, W, H);
    for (let i = 0; i < 7000; i++) {
      ctx.fillStyle = `rgba(255,255,255,${Math.random() * .03})`; ctx.fillRect(Math.random() * W, Math.random() * H, 1, 1);
    }
    ctx.font = "600 22px Arial"; ctx.fillStyle = "rgba(232,228,220,.3)"; ctx.fillText("â—ˆ  TEXTANALYZER", 60, 80);
    ctx.fillStyle = "#e8c96d"; ctx.fillRect(60, 96, 90, 3);
    ctx.font = "italic 33px Georgia"; ctx.fillStyle = "#e8e4dc";
    let y = wrapCtx(ctx, `"${resultado.frase_final}"`, 60, 155, W - 120, 48);
    const divY = Math.max(y + 44, 290);
    ctx.fillStyle = "rgba(255,255,255,.06)"; ctx.fillRect(60, divY, W - 120, 1);
    ctx.font = "bold 42px Georgia"; ctx.fillStyle = "#e8e4dc"; ctx.fillText(resultado.perfil.nome, 60, divY + 54);
    ctx.font = "500 22px Arial"; ctx.fillStyle = "#e8c96d"; ctx.fillText(resultado.perfil.arquetipo, 60, divY + 88);
    const sc = resultado.dinamica.score_interesse;
    ctx.font = "bold 84px Arial"; ctx.fillStyle = scoreColor(sc); ctx.fillText(`${sc}%`, 60, divY + 200);
    ctx.font = "400 20px Arial"; ctx.fillStyle = "rgba(232,228,220,.35)"; ctx.fillText("de interesse", 60, divY + 232);
    ctx.fillStyle = "rgba(255,255,255,.07)"; roundR(ctx, 60, divY + 248, W - 120, 10, 5);
    ctx.fillStyle = scoreColor(sc); roundR(ctx, 60, divY + 248, ((W - 120) * sc / 100), 10, 5);
    ctx.font = "500 24px Arial"; ctx.fillStyle = "#e8e4dc"; ctx.fillText(`Poder: ${resultado.dinamica.score_poder}`, 60, divY + 294);
    ctx.font = "400 20px Arial"; ctx.fillStyle = "rgba(232,228,220,.4)"; ctx.fillText(resultado.dinamica.tipo_vinculo, 60, divY + 326);
    ctx.fillStyle = "rgba(255,255,255,.06)"; ctx.fillRect(60, divY + 352, W - 120, 1);
    let sy = divY + 398;
    (resultado.sinais || []).slice(0, 3).forEach(s => {
      const col = SC[s.tipo] || SC.hidden;
      ctx.font = "500 19px Arial"; ctx.fillStyle = col.border; ctx.fillText(col.icon, 60, sy);
      ctx.font = "400 19px Arial"; ctx.fillStyle = "rgba(232,228,220,.72)";
      wrapCtx(ctx, s.texto, 92, sy, W - 150, 26, 1); sy += 54;
    });
    const bY = sy + 18;
    ctx.fillStyle = "rgba(232,201,109,.07)"; roundR(ctx, 60, bY, W - 120, 120, 3);
    ctx.strokeStyle = "rgba(232,201,109,.2)"; ctx.lineWidth = 1; roundR(ctx, 60, bY, W - 120, 120, 3, false, true);
    ctx.font = "500 18px Arial"; ctx.fillStyle = "rgba(232,201,109,.55)"; ctx.fillText("O QUE FAZER AGORA", 80, bY + 32);
    ctx.font = "400 19px Arial"; ctx.fillStyle = "#e8e4dc"; wrapCtx(ctx, resultado.proximo_passo.recomendacao, 80, bY + 62, W - 160, 26, 2);
    ctx.fillStyle = "rgba(255,255,255,.06)"; ctx.fillRect(60, H - 60, W - 120, 1);
    ctx.font = "400 18px Arial"; ctx.fillStyle = "rgba(232,228,220,.2)"; ctx.fillText("textanalyzer.com", 60, H - 28);
    ctx.fillStyle = "rgba(232,228,220,.2)"; ctx.textAlign = "right"; ctx.fillText(new Date().toLocaleDateString("pt-BR"), W - 60, H - 28);
    ctx.textAlign = "left";
    setUrl(c.toDataURL("image/png"));
  }

  function baixar() {
    const a = document.createElement("a");
    a.href = url; a.download = `analise-${resultado.perfil.nome.replace(/\s/g, "-")}.png`; a.click();
  }

  return (
    <div style={{ position: "fixed", inset: 0, background: "rgba(0,0,0,.92)", zIndex: 300, display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "flex-start", padding: "24px 16px", gap: 16, overflowY: "auto" }}>
      <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".2em", color: "rgba(232,228,220,.35)", textTransform: "uppercase" }}>Card para TikTok / Reels</div>
      <canvas ref={canvasRef} style={{ display: "none" }} />
      {url && <img src={url} alt="card" style={{ maxWidth: 340, width: "100%", border: "1px solid rgba(255,255,255,.08)" }} />}
      <div style={{ display: "flex", gap: 10, width: "100%", maxWidth: 340 }}>
        <button className="btn-gold" onClick={baixar} style={{ flex: 2 }}>â¬‡ Baixar PNG</button>
        <button className="btn-outline" onClick={onClose} style={{ flex: 1 }}>Fechar</button>
      </div>
      <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.2)", textAlign: "center" }}>Salve e poste no TikTok com #TextAnalyzer âœ¦</p>
    </div>
  );
}

function wrapCtx(ctx, text, x, y, maxW, lineH, maxLines = 99) {
  const words = text.split(" "); let line = "", cy = y, lines = 0;
  for (let i = 0; i < words.length; i++) {
    const t = line + words[i] + " ";
    if (ctx.measureText(t).width > maxW && i > 0) {
      ctx.fillText(line, x, cy); line = words[i] + " "; cy += lineH; lines++;
      if (lines >= maxLines) { ctx.fillText(line + "...", x, cy); return cy; }
    } else line = t;
  }
  ctx.fillText(line, x, cy); return cy;
}
function roundR(ctx, x, y, w, h, r, fill = true, stroke = false) {
  ctx.beginPath(); ctx.moveTo(x + r, y); ctx.lineTo(x + w - r, y); ctx.quadraticCurveTo(x + w, y, x + w, y + r);
  ctx.lineTo(x + w, y + h - r); ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  ctx.lineTo(x + r, y + h); ctx.quadraticCurveTo(x, y + h, x, y + h - r);
  ctx.lineTo(x, y + r); ctx.quadraticCurveTo(x, y, x + r, y); ctx.closePath();
  if (fill) ctx.fill(); if (stroke) ctx.stroke();
}

// â”€â”€â”€ Paywall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Paywall({ onClose, usadas }) {
  return (
    <div className="paywall-overlay">
      <div className="paywall-box ta-fade-in">
        <div style={{ fontSize: 36, marginBottom: 16 }}>âœ¦</div>
        <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".2em", color: "#e8c96d", textTransform: "uppercase", marginBottom: 12 }}>Limite atingido</div>
        <h2 style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 28, fontWeight: 400, color: "#e8e4dc", lineHeight: 1.2, marginBottom: 12 }}>
          VocÃª usou suas<br /><em style={{ fontStyle: "italic", color: "#e8c96d" }}>{FREE_LIMIT} anÃ¡lises grÃ¡tis</em>
        </h2>
        <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 14, color: "rgba(232,228,220,.5)", lineHeight: 1.6, marginBottom: 28 }}>
          Continue decodificando conversas sem limite. Cancele quando quiser.
        </p>
        <div style={{ background: "rgba(232,201,109,.06)", border: "1px solid rgba(232,201,109,.2)", borderRadius: 2, padding: "20px", marginBottom: 20, textAlign: "left" }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 10 }}>
            <div>
              <div style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 20, color: "#e8e4dc" }}>Pro</div>
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "rgba(232,228,220,.4)" }}>AnÃ¡lises ilimitadas</div>
            </div>
            <div style={{ textAlign: "right" }}>
              <div style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 28, color: "#e8c96d" }}>R$19</div>
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.35)" }}>/mÃªs</div>
            </div>
          </div>
          {["AnÃ¡lises ilimitadas", "HistÃ³rico completo", "Card para TikTok", "Prioridade na fila"].map(f => (
            <div key={f} style={{ display: "flex", gap: 8, alignItems: "center", marginTop: 8 }}>
              <span style={{ color: "#00ff87", fontSize: 12 }}>âœ¦</span>
              <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "rgba(232,228,220,.65)" }}>{f}</span>
            </div>
          ))}
        </div>
        <button className="btn-pro">Assinar Pro â€” R$19/mÃªs â†’</button>
        <button className="btn-outline" onClick={onClose} style={{ width: "100%", marginTop: 10 }}>Voltar</button>
        <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.2)", marginTop: 14 }}>
          Pagamento seguro Â· Cancele a qualquer momento
        </p>
      </div>
    </div>
  );
}

// â”€â”€â”€ Auth Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function AuthScreen({ onAuth }) {
  const [modo, setModo] = useState("login");
  const [nome, setNome] = useState("");
  const [email, setEmail] = useState("");
  const [senha, setSenha] = useState("");
  const [erro, setErro] = useState("");
  const [loading, setLoading] = useState(false);

  async function handleSubmit() {
    setErro("");
    if (!email.trim() || !senha.trim()) { setErro("Preencha email e senha."); return; }
    if (modo === "signup" && !nome.trim()) { setErro("Digite seu nome."); return; }
    if (senha.length < 6) { setErro("Senha deve ter no mÃ­nimo 6 caracteres."); return; }
    setLoading(true);
    try {
      const key = `user_${email.toLowerCase().trim()}`;
      if (modo === "signup") {
        try {
          await window.storage.get(key);
          setErro("Email jÃ¡ cadastrado. FaÃ§a login."); setLoading(false); return;
        } catch(e) {}
        const user = { nome: nome.trim(), email: email.toLowerCase().trim(), senha, analises_usadas: 0, plano: "free", criado: new Date().toISOString() };
        await window.storage.set(key, JSON.stringify(user));
        onAuth(user);
      } else {
        let userData;
        try { const res = await window.storage.get(key); userData = JSON.parse(res.value); }
        catch(e) { setErro("Email nÃ£o encontrado. Crie uma conta."); setLoading(false); return; }
        if (userData.senha !== senha) { setErro("Senha incorreta."); setLoading(false); return; }
        onAuth(userData);
      }
    } catch(e) { setErro("Erro inesperado. Tente novamente."); }
    finally { setLoading(false); }
  }

  function handleGoogle() {
    const mockUser = { nome: "UsuÃ¡rio Google", email: `google_${Date.now()}@mock.com`, analises_usadas: 0, plano: "free" };
    onAuth(mockUser);
  }

  return (
    <div style={{ background: "#0a0a0a", display: "flex", alignItems: "center", justifyContent: "center", padding: "60px 24px", position: "relative", overflow: "hidden" }}>
      <div className="ta-glow" style={{ width: 500, height: 500, top: -150, left: -150, background: "rgba(232,201,109,.05)" }} />
      <div className="ta-glow" style={{ width: 400, height: 400, bottom: -100, right: -100, background: "rgba(180,100,255,.04)" }} />

      <div style={{ position: "relative", zIndex: 1, width: "100%", maxWidth: 400 }} className="ta-fade-in">
        <div style={{ textAlign: "center", marginBottom: 40 }}>
          <h2 style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 36, fontWeight: 400, letterSpacing: "-.02em", color: "#e8e4dc" }}>
            Text<em style={{ fontStyle: "italic", color: "#e8c96d" }}>Analyzer</em>
          </h2>
          <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 14, color: "rgba(232,228,220,.4)", marginTop: 8 }}>
            {modo === "login" ? "Entre para continuar" : "Crie sua conta grÃ¡tis"}
          </p>
        </div>

        <div style={{ display: "flex", borderBottom: "1px solid rgba(255,255,255,.07)", marginBottom: 24 }}>
          <button className={`tab ${modo === "login" ? "active" : ""}`} onClick={() => { setModo("login"); setErro(""); }}>Entrar</button>
          <button className={`tab ${modo === "signup" ? "active" : ""}`} onClick={() => { setModo("signup"); setErro(""); }}>Criar conta</button>
        </div>

        <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
          <button className="btn-social" onClick={handleGoogle}>
            <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
            Continuar com Google
          </button>

          <div className="social-divider"><span>ou com email</span></div>

          {modo === "signup" && (
            <div>
              <label style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".15em", color: "rgba(232,228,220,.4)", textTransform: "uppercase", display: "block", marginBottom: 7 }}>Nome</label>
              <input type="text" value={nome} onChange={e => setNome(e.target.value)} placeholder="Seu nome" />
            </div>
          )}

          <div>
            <label style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".15em", color: "rgba(232,228,220,.4)", textTransform: "uppercase", display: "block", marginBottom: 7 }}>Email</label>
            <input type="email" value={email} onChange={e => setEmail(e.target.value)} placeholder="seu@email.com" onKeyDown={e => e.key === "Enter" && handleSubmit()} />
          </div>

          <div>
            <label style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".15em", color: "rgba(232,228,220,.4)", textTransform: "uppercase", display: "block", marginBottom: 7 }}>Senha</label>
            <input type="password" value={senha} onChange={e => setSenha(e.target.value)} placeholder={modo === "signup" ? "MÃ­nimo 6 caracteres" : "â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"} onKeyDown={e => e.key === "Enter" && handleSubmit()} />
          </div>

          {erro && (
            <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "#ff4757", padding: "10px 14px", background: "rgba(255,71,87,.06)", border: "1px solid rgba(255,71,87,.2)", borderRadius: 2 }}>{erro}</div>
          )}

          <button className="btn-gold" onClick={handleSubmit} disabled={loading} style={{ marginTop: 4 }}>
            {loading ? <span className="spin">â—ˆ</span> : modo === "login" ? "Entrar â†’" : "Criar conta grÃ¡tis â†’"}
          </button>

          {modo === "signup" && (
            <div style={{ textAlign: "center" }}>
              <div style={{ display: "inline-flex", alignItems: "center", gap: 6, background: "rgba(0,255,135,.06)", border: "1px solid rgba(0,255,135,.15)", borderRadius: 999, padding: "5px 14px" }}>
                <span style={{ color: "#00ff87", fontSize: 12 }}>âœ¦</span>
                <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "rgba(0,255,135,.7)" }}>10 anÃ¡lises grÃ¡tis incluÃ­das</span>
              </div>
            </div>
          )}

          <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.2)", textAlign: "center", lineHeight: 1.6 }}>
            Suas conversas nunca sÃ£o armazenadas nos servidores.
          </p>
        </div>
      </div>
    </div>
  );
}

// â”€â”€â”€ App Principal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function TextAnalyzer() {
  const [user, setUser]               = useState(null);
  const [authChecked, setAuthChecked] = useState(false);
  const [conversa, setConversa]       = useState("");
  const [contexto, setContexto]       = useState("");
  const [resultado, setResultado]     = useState(null);
  const [loading, setLoading]         = useState(false);
  const [erro, setErro]               = useState(null);
  const [etapa, setEtapa]             = useState("input");
  const [loadingMsg, setLoadingMsg]   = useState(0);
  const [inputMode, setInputMode]     = useState("texto");
  const [imgB64, setImgB64]           = useState(null);
  const [imgPreview, setImgPreview]   = useState(null);
  const [extraindo, setExtraindo]     = useState(false);
  const [dragOver, setDragOver]       = useState(false);
  const [showShare, setShowShare]     = useState(false);
  const [showPaywall, setShowPaywall] = useState(false);
  const [historico, setHistorico]     = useState([]);
  const [aba, setAba]                 = useState("nova");
  const fileRef = useRef();

  const msgs = ["Lendo nas entrelinhas...","Analisando padrÃµes emocionais...","Identificando o que nÃ£o foi dito...","Calculando dinÃ¢micas de poder...","Preparando a verdade..."];

  useEffect(() => {
    async function check() {
      try {
        const sess = await window.storage.get("ta_session");
        if (sess?.value) {
          const u = JSON.parse(sess.value);
          setUser(u);
          await carregarHistorico(u.email);
        }
      } catch(e) {}
      setAuthChecked(true);
    }
    check();
  }, []);

  async function carregarHistorico(email) {
    try {
      const res = await window.storage.get(`hist_${email}`);
      if (res?.value) setHistorico(JSON.parse(res.value));
    } catch(e) {}
  }

  async function onAuth(u) {
    setUser(u);
    try { await window.storage.set("ta_session", JSON.stringify(u)); } catch(e) {}
    await carregarHistorico(u.email);
  }

  async function logout() {
    try { await window.storage.delete("ta_session"); } catch(e) {}
    setUser(null); setHistorico([]); resetar();
  }

  async function atualizarUser(updates) {
    const novo = { ...user, ...updates };
    setUser(novo);
    try {
      await window.storage.set("ta_session", JSON.stringify(novo));
      await window.storage.set(`user_${novo.email}`, JSON.stringify(novo));
    } catch(e) {}
  }

  async function salvarHistorico(item) {
    const novo = [item, ...historico].slice(0, 20);
    setHistorico(novo);
    try { await window.storage.set(`hist_${user.email}`, JSON.stringify(novo)); } catch(e) {}
  }

  useEffect(() => {
    if (!loading) return;
    const iv = setInterval(() => setLoadingMsg(p => (p + 1) % msgs.length), 1800);
    return () => clearInterval(iv);
  }, [loading]);

  function handleFile(file) {
    if (!file?.type.startsWith("image/")) { setErro("Envie uma imagem (PNG, JPG, WEBP)."); return; }
    setErro(null);
    const reader = new FileReader();
    reader.onload = e => {
      setImgPreview(e.target.result);
      setImgB64({ data: e.target.result.split(",")[1], mediaType: file.type });
    };
    reader.readAsDataURL(file);
  }

  async function extrair() {
    if (!imgB64) return;
    setExtraindo(true); setErro(null);
    try {
      const res = await fetch("https://api.anthropic.com/v1/messages", {
        method: "POST", headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-sonnet-4-20250514", max_tokens: 1000,
          messages: [{ role: "user", content: [
            { type: "image", source: { type: "base64", media_type: imgB64.mediaType, data: imgB64.data } },
            { type: "text", text: EXTRACT_PROMPT }
          ]}],
        }),
      });
      const d = await res.json();
      const txt = d.content?.[0]?.text || "";
      if (txt.startsWith("ERRO:")) setErro("NÃ£o consegui ler a imagem. Tente com melhor resoluÃ§Ã£o.");
      else { setConversa(txt); setInputMode("texto"); setImgPreview(null); setImgB64(null); }
    } catch(e) { setErro("Erro ao processar imagem."); }
    finally { setExtraindo(false); }
  }

  async function analisar() {
    if (!conversa.trim() || conversa.length < 30) { setErro("Conversa muito curta."); return; }
    const usadas = user.analises_usadas || 0;
    if (user.plano !== "pro" && usadas >= FREE_LIMIT) { setShowPaywall(true); return; }
    setErro(null); setLoading(true); setEtapa("loading");
    try {
      const res = await fetch("https://api.anthropic.com/v1/messages", {
        method: "POST", headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-sonnet-4-20250514", max_tokens: 1000,
          system: SYSTEM_PROMPT,
          messages: [{ role: "user", content: `Contexto: ${contexto || "Nenhum"}\n\nConversa:\n${conversa}` }],
        }),
      });
      const d = await res.json();
      const parsed = JSON.parse(d.content?.[0]?.text || "");
      setResultado(parsed);
      setEtapa("resultado");
      await atualizarUser({ analises_usadas: usadas + 1 });
      await salvarHistorico({ id: Date.now().toString(), data: new Date().toLocaleDateString("pt-BR"), contexto, resultado: parsed });
    } catch(e) { setErro("Erro ao analisar. Tente novamente."); setEtapa("input"); }
    finally { setLoading(false); }
  }

  function resetar() {
    setResultado(null); setConversa(""); setContexto("");
    setEtapa("input"); setErro(null); setImgB64(null); setImgPreview(null); setInputMode("texto");
  }

  const analises_usadas = user?.analises_usadas || 0;
  const restantes = Math.max(0, FREE_LIMIT - analises_usadas);
  const isPro = user?.plano === "pro";

  if (!authChecked) return (
    <div style={{ minHeight: "50vh", background: "#0a0a0a", display: "flex", alignItems: "center", justifyContent: "center" }}>
      <div style={{ fontSize: 32 }} className="pulse">â—ˆ</div>
    </div>
  );

  if (!user) return <AuthScreen onAuth={onAuth} />;

  return (
    <div style={{ background: "#0a0a0a", color: "#e8e4dc", fontFamily: "'DM Serif Display',Georgia,serif", position: "relative", overflow: "hidden" }}>
      <div className="ta-grain" />
      <div className="ta-glow" style={{ width: 500, height: 500, top: -100, left: -150, background: "rgba(232,201,109,.04)" }} />
      <div className="ta-glow" style={{ width: 400, height: 400, bottom: -100, right: -100, background: "rgba(180,100,255,.03)" }} />

      {showShare && resultado && <ShareCard resultado={resultado} onClose={() => setShowShare(false)} />}
      {showPaywall && <Paywall usadas={analises_usadas} onClose={() => setShowPaywall(false)} />}

      <div style={{ position: "relative", zIndex: 1, maxWidth: 640, margin: "0 auto", padding: "32px 24px 80px" }}>

        {/* Top bar */}
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 36 }}>
          <div style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 22, letterSpacing: "-.02em" }}>
            Text<em style={{ fontStyle: "italic", color: "#e8c96d" }}>Analyzer</em>
          </div>
          <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
            {!isPro && (
              <div className="usage-pill" style={{ cursor: "pointer" }} onClick={() => setShowPaywall(true)}>
                <div className="usage-dot" style={{ background: restantes > 3 ? "#00ff87" : restantes > 0 ? "#ffd700" : "#ff4757" }} />
                {restantes > 0 ? `${restantes} restantes` : "Limite atingido"}
              </div>
            )}
            {isPro && (
              <div className="usage-pill">
                <span style={{ color: "#e8c96d", fontSize: 10 }}>âœ¦</span>
                <span style={{ color: "#e8c96d" }}>Pro</span>
              </div>
            )}
            <button onClick={logout} title="Sair"
              style={{ background: "rgba(255,255,255,.05)", border: "1px solid rgba(255,255,255,.08)", borderRadius: "50%", width: 34, height: 34, cursor: "pointer", color: "#e8e4dc", fontFamily: "'DM Sans',sans-serif", fontSize: 13, display: "flex", alignItems: "center", justifyContent: "center" }}>
              {(user.nome || user.email)[0].toUpperCase()}
            </button>
          </div>
        </div>

        {/* SaudaÃ§Ã£o */}
        {etapa === "input" && (
          <div style={{ marginBottom: 28 }}>
            <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "rgba(232,228,220,.35)" }}>
              OlÃ¡, <span style={{ color: "rgba(232,228,220,.7)" }}>{user.nome || user.email.split("@")[0]}</span>
            </p>
            <h2 style={{ fontSize: "clamp(28px,6vw,42px)", lineHeight: 1.1, fontWeight: 400, letterSpacing: "-.02em", marginTop: 4 }}>
              O que a conversa<br /><em style={{ fontStyle: "italic", color: "#e8c96d" }}>realmente diz?</em>
            </h2>
          </div>
        )}

        {/* Abas */}
        {etapa === "input" && (
          <div style={{ display: "flex", borderBottom: "1px solid rgba(255,255,255,.07)", marginBottom: 24 }}>
            <button className={`tab ${aba === "nova" ? "active" : ""}`} onClick={() => setAba("nova")}>Nova anÃ¡lise</button>
            <button className={`tab ${aba === "historico" ? "active" : ""}`} onClick={() => setAba("historico")}>
              HistÃ³rico {historico.length > 0 && <span style={{ marginLeft: 5, background: "rgba(232,201,109,.15)", color: "#e8c96d", fontSize: 10, padding: "1px 5px", borderRadius: 8 }}>{historico.length}</span>}
            </button>
          </div>
        )}

        {/* â”€â”€ ABA NOVA ANÃLISE â”€â”€ */}
        {etapa === "input" && aba === "nova" && (
          <div className="ta-fade-in">
            <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
              <div>
                <label style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, letterSpacing: ".15em", color: "rgba(232,228,220,.4)", textTransform: "uppercase", display: "block", marginBottom: 7 }}>Contexto (opcional)</label>
                <input type="text" value={contexto} onChange={e => setContexto(e.target.value)} placeholder="ex: crush de 2 meses, ex que voltou, amigo distante..." />
              </div>

              <div>
                <div style={{ display: "flex", borderBottom: "1px solid rgba(255,255,255,.07)", marginBottom: 14 }}>
                  <button className={`tab ${inputMode === "texto" ? "active" : ""}`} onClick={() => setInputMode("texto")}>âœ Colar texto</button>
                  <button className={`tab ${inputMode === "print" ? "active" : ""}`} onClick={() => setInputMode("print")}>â—» Enviar print</button>
                </div>

                {inputMode === "texto" && (
                  <div>
                    <textarea rows={9} value={conversa} onChange={e => setConversa(e.target.value)} placeholder={"Cole aqui a conversa completa...\n\nVocÃª: oi sumido\nEle: oi! desculpa\nVocÃª: tÃ¡ bem?\n..."} />
                    <div style={{ display: "flex", justifyContent: "space-between", marginTop: 6 }}>
                      {conversa.length > 30 && <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(0,255,135,.5)" }}>âœ¦ Pronta</span>}
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.2)", marginLeft: "auto" }}>{conversa.length} chars</span>
                    </div>
                  </div>
                )}

                {inputMode === "print" && (
                  <div>
                    {!imgPreview ? (
                      <div className={`drop-zone ${dragOver ? "over" : ""}`}
                        onDrop={e => { e.preventDefault(); setDragOver(false); handleFile(e.dataTransfer.files[0]); }}
                        onDragOver={e => { e.preventDefault(); setDragOver(true); }}
                        onDragLeave={() => setDragOver(false)}
                        onClick={() => fileRef.current?.click()}
                      >
                        <input ref={fileRef} type="file" accept="image/*" style={{ display: "none" }} onChange={e => handleFile(e.target.files[0])} />
                        <div style={{ fontSize: 36, marginBottom: 14, opacity: .3 }}>â¬†</div>
                        <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 15, color: "rgba(232,228,220,.5)", marginBottom: 6 }}>Arraste o print ou clique</p>
                        <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "rgba(232,228,220,.2)" }}>WhatsApp Â· Instagram Â· Tinder Â· iMessage</p>
                      </div>
                    ) : (
                      <div>
                        <div style={{ border: "1px solid rgba(255,255,255,.08)", borderRadius: 2, overflow: "hidden", marginBottom: 12, position: "relative" }}>
                          <img src={imgPreview} alt="print" style={{ width: "100%", maxHeight: 280, objectFit: "contain", background: "rgba(255,255,255,.02)", display: "block" }} />
                          <div style={{ position: "absolute", top: 10, right: 10, background: "rgba(0,0,0,.75)", border: "1px solid rgba(255,255,255,.1)", borderRadius: 2, padding: "3px 10px", fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.5)" }}>Print carregado</div>
                        </div>
                        <div style={{ display: "flex", gap: 10 }}>
                          <button className="btn-dark" onClick={extrair} disabled={extraindo} style={{ flex: 2 }}>
                            {extraindo ? <span style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}><span className="spin">â—ˆ</span>Lendo...</span> : "â—ˆ Extrair texto â†’"}
                          </button>
                          <button className="btn-outline" onClick={() => { setImgPreview(null); setImgB64(null); setErro(null); }} disabled={extraindo}>Trocar</button>
                        </div>
                      </div>
                    )}
                  </div>
                )}
              </div>

              {erro && <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "#ff4757", padding: "10px 14px", background: "rgba(255,71,87,.06)", border: "1px solid rgba(255,71,87,.2)", borderRadius: 2 }}>{erro}</div>}

              {!isPro && restantes <= 3 && restantes > 0 && (
                <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", background: "rgba(255,215,0,.05)", border: "1px solid rgba(255,215,0,.15)", borderRadius: 2, padding: "10px 14px" }}>
                  <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "rgba(255,215,0,.8)" }}>âš  Apenas {restantes} anÃ¡lise{restantes !== 1 ? "s" : ""} grÃ¡tis restante{restantes !== 1 ? "s" : ""}</span>
                  <button onClick={() => setShowPaywall(true)} style={{ background: "transparent", border: "none", cursor: "pointer", fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "#e8c96d", textDecoration: "underline" }}>Ver Pro</button>
                </div>
              )}

              <button className="btn-gold" onClick={analisar} disabled={loading || !conversa.trim() || conversa.length < 30}>
                Analisar conversa â†’
              </button>
              <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.18)", textAlign: "center", lineHeight: 1.6 }}>
                Sua conversa nÃ£o Ã© armazenada. AnÃ¡lise gerada por IA.
              </p>
            </div>
          </div>
        )}

        {/* â”€â”€ ABA HISTÃ“RICO â”€â”€ */}
        {etapa === "input" && aba === "historico" && (
          <div className="ta-fade-in">
            {historico.length === 0 ? (
              <div style={{ textAlign: "center", padding: "60px 0" }}>
                <div style={{ fontSize: 32, marginBottom: 14, opacity: .2 }}>â—ˆ</div>
                <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 15, color: "rgba(232,228,220,.3)" }}>Nenhuma anÃ¡lise ainda</p>
                <button className="btn-outline" onClick={() => setAba("nova")} style={{ marginTop: 20 }}>Fazer primeira anÃ¡lise â†’</button>
              </div>
            ) : (
              <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.3)", marginBottom: 4 }}>{historico.length} anÃ¡lise{historico.length !== 1 ? "s" : ""} salva{historico.length !== 1 ? "s" : ""}</div>
                {historico.map(item => (
                  <div key={item.id} onClick={() => { setResultado(item.resultado); setContexto(item.contexto || ""); setEtapa("resultado"); setAba("nova"); }}
                    style={{ background: "rgba(255,255,255,.025)", border: "1px solid rgba(255,255,255,.07)", borderRadius: 2, padding: "14px 16px", cursor: "pointer", transition: "background .2s" }}
                    onMouseEnter={e => e.currentTarget.style.background = "rgba(255,255,255,.04)"}
                    onMouseLeave={e => e.currentTarget.style.background = "rgba(255,255,255,.025)"}
                  >
                    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 4 }}>
                      <div>
                        <span style={{ fontFamily: "'DM Serif Display',Georgia,serif", fontSize: 15, color: "#e8e4dc" }}>{item.resultado.perfil.nome}</span>
                        <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "#e8c96d", marginLeft: 8 }}>{item.resultado.perfil.arquetipo}</span>
                      </div>
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.25)" }}>{item.data}</span>
                    </div>
                    <div style={{ display: "flex", gap: 8, alignItems: "center" }}>
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: scoreColor(item.resultado.dinamica.score_interesse), fontWeight: 500 }}>{item.resultado.dinamica.score_interesse}%</span>
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.3)" }}>Â·</span>
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.4)" }}>{item.resultado.dinamica.tipo_vinculo}</span>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        )}

        {/* â”€â”€ LOADING â”€â”€ */}
        {etapa === "loading" && (
          <div style={{ textAlign: "center", padding: "80px 0" }} className="ta-fade-in">
            <div style={{ fontSize: 48, marginBottom: 32 }} className="pulse">â—ˆ</div>
            <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 16, color: "rgba(232,228,220,.6)", fontWeight: 300 }} className="pulse">{msgs[loadingMsg]}</p>
            <div style={{ width: 200, height: 1, background: "rgba(255,255,255,.06)", margin: "32px auto 0", position: "relative", overflow: "hidden" }}>
              <div style={{ position: "absolute", height: "100%", width: "40%", background: "#e8c96d", animation: "taSlide 1.5s ease-in-out infinite" }} />
            </div>
          </div>
        )}

        {/* â”€â”€ RESULTADO â”€â”€ */}
        {etapa === "resultado" && resultado && (
          <div className="ta-fade-in" style={{ display: "flex", flexDirection: "column", gap: 16 }}>

            <button className="btn-share" onClick={() => setShowShare(true)}>â†— Gerar card para TikTok / Reels</button>

            <div style={{ borderLeft: "3px solid #e8c96d", paddingLeft: 20, marginBottom: 4 }}>
              <p style={{ fontSize: "clamp(18px,4vw,22px)", lineHeight: 1.4, fontStyle: "italic" }}>"{resultado.frase_final}"</p>
            </div>

            <div className="card">
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 10, letterSpacing: ".2em", color: "rgba(232,228,220,.3)", textTransform: "uppercase", marginBottom: 12 }}>Perfil</div>
              <div style={{ fontSize: 20, marginBottom: 4 }}>{resultado.perfil.nome}</div>
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "#e8c96d", letterSpacing: ".1em" }}>{resultado.perfil.arquetipo}</div>
              <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 14, color: "rgba(232,228,220,.6)", marginTop: 12, lineHeight: 1.6, fontWeight: 300 }}>{resultado.perfil.resumo}</p>
            </div>

            <div className="card">
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 10, letterSpacing: ".2em", color: "rgba(232,228,220,.3)", textTransform: "uppercase", marginBottom: 16 }}>DinÃ¢mica</div>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 16, marginBottom: 16 }}>
                <div>
                  <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.35)", marginBottom: 6 }}>Interesse</div>
                  <div style={{ fontSize: 28, color: scoreColor(resultado.dinamica.score_interesse) }}>{resultado.dinamica.score_interesse}<span style={{ fontSize: 14 }}>%</span></div>
                  <div className="score-bar"><div className="score-fill" style={{ width: `${resultado.dinamica.score_interesse}%`, background: scoreColor(resultado.dinamica.score_interesse) }} /></div>
                </div>
                <div>
                  <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.35)", marginBottom: 6 }}>Poder</div>
                  <div style={{ fontSize: 16, marginTop: 6 }}>{resultado.dinamica.score_poder}</div>
                  <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "rgba(232,228,220,.4)", marginTop: 4 }}>{resultado.dinamica.tipo_vinculo}</div>
                </div>
              </div>
              <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 14, color: "rgba(232,228,220,.6)", lineHeight: 1.6, fontWeight: 300 }}>{resultado.dinamica.resumo}</p>
            </div>

            <div className="card">
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 10, letterSpacing: ".2em", color: "rgba(232,228,220,.3)", textTransform: "uppercase", marginBottom: 16 }}>Sinais</div>
              <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
                {resultado.sinais?.map((s, i) => {
                  const c = SC[s.tipo] || SC.hidden;
                  return (
                    <div key={i} style={{ background: c.bg, borderLeft: `2px solid ${c.border}`, borderRadius: 2, padding: "10px 14px", display: "flex", gap: 10 }}>
                      <span style={{ color: c.border, fontSize: 14, flexShrink: 0, marginTop: 1 }}>{c.icon}</span>
                      <span style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 13, color: "rgba(232,228,220,.75)", lineHeight: 1.5 }}>{s.texto}</span>
                    </div>
                  );
                })}
              </div>
            </div>

            <div style={{ background: "rgba(232,201,109,.06)", border: "1px solid rgba(232,201,109,.15)", borderRadius: 2, padding: 24 }}>
              <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 10, letterSpacing: ".2em", color: "rgba(232,201,109,.5)", textTransform: "uppercase", marginBottom: 16 }}>O que fazer agora</div>
              <p style={{ fontSize: 18, lineHeight: 1.4, marginBottom: 16 }}>{resultado.proximo_passo.recomendacao}</p>
              {resultado.proximo_passo.mensagem_sugerida && (
                <div style={{ background: "rgba(0,0,0,.3)", border: "1px solid rgba(255,255,255,.07)", borderRadius: 2, padding: "12px 16px", marginBottom: 16 }}>
                  <div style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 10, letterSpacing: ".15em", color: "rgba(232,228,220,.3)", textTransform: "uppercase", marginBottom: 8 }}>Mensagem sugerida</div>
                  <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 14, color: "rgba(232,228,220,.8)", lineHeight: 1.6, fontStyle: "italic" }}>"{resultado.proximo_passo.mensagem_sugerida}"</p>
                </div>
              )}
              <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 12, color: "rgba(255,71,87,.7)", lineHeight: 1.5 }}>âš  {resultado.proximo_passo.aviso}</p>
            </div>

            <div style={{ display: "flex", gap: 10 }}>
              <button className="btn-outline" onClick={resetar} style={{ flex: 1 }}>â† Nova anÃ¡lise</button>
              <button className="btn-outline" onClick={() => { setEtapa("input"); setAba("historico"); }} style={{ flex: 1 }}>HistÃ³rico</button>
            </div>

            <p style={{ fontFamily: "'DM Sans',sans-serif", fontSize: 11, color: "rgba(232,228,220,.15)", textAlign: "center" }}>
              AnÃ¡lise gerada por IA. Use como reflexÃ£o â€” nÃ£o como verdade absoluta.
            </p>
          </div>
        )}
      </div>
    </div>
  );
}

// Inject CSS & render
const styleEl = document.createElement("style");
styleEl.textContent = APP_CSS;
document.head.appendChild(styleEl);

const root = ReactDOM.createRoot(document.getElementById("react-app"));
root.render(<TextAnalyzer />);
</script>

<script>
  // Scroll reveal
  const fadeEls = document.querySelectorAll('.fade-up');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry, i) => {
      if (entry.isIntersecting) {
        setTimeout(() => entry.target.classList.add('visible'), i * 80);
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  fadeEls.forEach(el => observer.observe(el));
</script>
</body>
</html>
